<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ’± ì›í´ë¦­ í™˜ìœ¨ íŠ¸ë ˆì´ë”© ê°€ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            min-height: 100vh;
            color: #ffffff;
            padding: 15px;
            padding-bottom: 100px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* í—¤ë” */
        .header {
            text-align: center;
            padding: 25px 0;
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #ff0080);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            color: #8892b0;
            line-height: 1.5;
        }
        
        .clock-box {
            background: #141428;
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .clock {
            font-size: 1.1rem;
            color: #00d4ff;
            font-family: 'Consolas', monospace;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .market-status {
            display: block;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            text-align: center;
            margin: 0 auto;
            width: fit-content;
        }
        
        .market-status.optimal {
            background: rgba(255, 211, 42, 0.2);
            color: #ffd32a;
            border: 1px solid #ffd32a;
            animation: pulse 2s infinite;
        }
        
        .market-status.open {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }
        
        .market-status.closed {
            background: rgba(136, 146, 176, 0.2);
            color: #8892b0;
            border: 1px solid #8892b0;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* ì‹¤ì‹œê°„ ë°ì´í„° ì¹´ë“œ */
        .live-data-card {
            background: #141428;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .live-data-card h2 {
            color: #00d4ff;
            font-size: 1rem;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .live-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 15px;
            background: #1e1e3c;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .data-row:last-child {
            margin-bottom: 0;
        }
        
        .data-label {
            display: flex;
            flex-direction: column;
        }
        
        .data-label .title {
            font-size: 0.85rem;
            color: #8892b0;
        }
        
        .data-label .source {
            font-size: 0.7rem;
            color: #5a5a7a;
            margin-top: 3px;
        }
        
        .data-value {
            text-align: right;
        }
        
        .data-value .price {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffffff;
        }
        
        .data-value .change {
            font-size: 0.8rem;
            margin-top: 3px;
        }
        
        .data-value .change.up { color: #00ff88; }
        .data-value .change.down { color: #ff4757; }
        .data-value .change.neutral { color: #8892b0; }
        
        .data-loading {
            text-align: center;
            padding: 20px;
            color: #8892b0;
        }
        
        .data-loading .spinner-small {
            width: 20px;
            height: 20px;
            border: 2px solid #2a2a4a;
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        /* ê°­ ë¯¸ë¦¬ë³´ê¸° */
        .gap-preview {
            background: linear-gradient(135deg, #1a1a2a 0%, #2a2a3a 100%);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }
        
        .gap-preview .label {
            font-size: 0.8rem;
            color: #8892b0;
            margin-bottom: 5px;
        }
        
        .gap-preview .value {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .gap-preview .value.up { color: #00ff88; }
        .gap-preview .value.down { color: #ff4757; }
        .gap-preview .value.neutral { color: #ffd32a; }
        
        .gap-preview .direction {
            font-size: 0.85rem;
            margin-top: 5px;
        }
        
        /* ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ */
        .refresh-btn {
            width: 100%;
            padding: 12px;
            border: 1px solid #3a3a5a;
            border-radius: 10px;
            background: transparent;
            color: #00d4ff;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .refresh-btn:active {
            background: #1e1e3c;
            transform: scale(0.98);
        }
        
        .refresh-btn:disabled {
            color: #5a5a7a;
            border-color: #2a2a4a;
        }
        
        /* ë©”ì¸ ë²„íŠ¼ */
        .main-btn {
            width: 100%;
            padding: 22px;
            border: none;
            border-radius: 18px;
            background: linear-gradient(135deg, #ff0080 0%, #ff4757 50%, #ff6b7a 100%);
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(255, 0, 128, 0.4);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .main-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .main-btn:active {
            transform: scale(0.98);
            box-shadow: 0 4px 15px rgba(255, 0, 128, 0.4);
        }
        
        .main-btn:active::before {
            left: 100%;
        }
        
        .main-btn:disabled {
            background: #4a4a6a;
            box-shadow: none;
        }
        
        .main-btn .sub {
            display: block;
            font-size: 0.85rem;
            font-weight: normal;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        /* ìˆ˜ë™ ì…ë ¥ í† ê¸€ */
        .manual-toggle {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .manual-toggle button {
            background: transparent;
            border: none;
            color: #5a5a7a;
            font-size: 0.8rem;
            cursor: pointer;
            padding: 10px;
            text-decoration: underline;
        }
        
        .manual-input-area {
            display: none;
            background: #141428;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .manual-input-area.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .manual-input-area h3 {
            color: #8892b0;
            font-size: 0.9rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .manual-input-group {
            margin-bottom: 12px;
        }
        
        .manual-input-group label {
            display: block;
            font-size: 0.8rem;
            color: #8892b0;
            margin-bottom: 5px;
        }
        
        .manual-input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #3a3a5a;
            border-radius: 8px;
            background: #1e1e3c;
            color: #ffffff;
            font-size: 1rem;
            text-align: center;
        }
        
        .manual-input-group input:focus {
            outline: none;
            border-color: #00d4ff;
        }
        
        /* íˆ¬ìê¸ˆ ì…ë ¥ */
        .investment-section {
            background: #141428;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .investment-section label {
            display: block;
            font-size: 0.85rem;
            color: #8892b0;
            margin-bottom: 8px;
        }
        
        .investment-input-row {
            display: flex;
            gap: 10px;
        }
        
        .investment-input-row input {
            flex: 1;
            padding: 12px;
            border: 1px solid #3a3a5a;
            border-radius: 8px;
            background: #1e1e3c;
            color: #ffffff;
            font-size: 1rem;
            text-align: center;
        }
        
        .investment-input-row input:focus {
            outline: none;
            border-color: #00d4ff;
        }
        
        .quick-amount {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .quick-amount button {
            flex: 1;
            min-width: 70px;
            padding: 8px;
            border: 1px solid #3a3a5a;
            border-radius: 6px;
            background: transparent;
            color: #8892b0;
            font-size: 0.75rem;
            cursor: pointer;
        }
        
        .quick-amount button:active {
            background: #1e1e3c;
            color: #00d4ff;
            border-color: #00d4ff;
        }
        
        /* ë¡œë”© */
        .loading {
            display: none;
            text-align: center;
            padding: 60px 20px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #2a2a4a;
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading p {
            color: #8892b0;
            font-size: 1rem;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ==================== ê²°ê³¼ ì˜ì—­ ==================== */
        .result-area {
            display: none;
        }
        
        .result-area.show {
            display: block;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ë©”ì¸ ì‹œê·¸ë„ */
        .main-signal {
            border-radius: 25px;
            padding: 35px 25px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .main-signal.sell-krw {
            background: linear-gradient(135deg, #0a2a1a 0%, #0a1a0a 100%);
            border: 2px solid #00ff88;
        }
        
        .main-signal.buy-krw {
            background: linear-gradient(135deg, #2a0a1a 0%, #1a0a0a 100%);
            border: 2px solid #ff4757;
        }
        
        .main-signal.hold {
            background: linear-gradient(135deg, #2a2a1a 0%, #1a1a0a 100%);
            border: 2px solid #ffd32a;
        }
        
        .signal-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 15px;
        }
        
        .main-signal.sell-krw .signal-badge { background: rgba(0, 255, 136, 0.2); color: #00ff88; }
        .main-signal.buy-krw .signal-badge { background: rgba(255, 71, 87, 0.2); color: #ff4757; }
        .main-signal.hold .signal-badge { background: rgba(255, 211, 42, 0.2); color: #ffd32a; }
        
        .signal-icon { font-size: 4rem; margin-bottom: 10px; }
        
        .signal-title {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .main-signal.sell-krw .signal-title { color: #00ff88; }
        .main-signal.buy-krw .signal-title { color: #ff4757; }
        .main-signal.hold .signal-title { color: #ffd32a; }
        
        .signal-desc {
            font-size: 1.1rem;
            color: #e0e0e0;
            margin-bottom: 20px;
        }
        
        .confidence-section { margin-top: 25px; }
        .confidence-label { font-size: 0.85rem; color: #8892b0; margin-bottom: 10px; }
        
        .confidence-bar-bg {
            background: rgba(255,255,255,0.1);
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .confidence-bar-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease;
        }
        
        .main-signal.sell-krw .confidence-bar-fill { background: linear-gradient(90deg, #00ff88, #00d4aa); }
        .main-signal.buy-krw .confidence-bar-fill { background: linear-gradient(90deg, #ff4757, #ff6b7a); }
        .main-signal.hold .confidence-bar-fill { background: linear-gradient(90deg, #ffd32a, #ffdd55); }
        
        .confidence-value { font-size: 1.1rem; font-weight: bold; color: #ffffff; }
        
        /* ë§¤ë§¤ ê°€ê²© ì¹´ë“œ */
        .price-guide-card {
            background: #141428;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .price-guide-card h3 {
            color: #00d4ff;
            font-size: 1.1rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 15px;
            background: #1e1e3c;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .price-row:last-child { margin-bottom: 0; }
        
        .price-label {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .price-label .icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        .price-label .icon.entry { background: rgba(0, 212, 255, 0.2); }
        .price-label .icon.target { background: rgba(0, 255, 136, 0.2); }
        .price-label .icon.stop { background: rgba(255, 71, 87, 0.2); }
        
        .price-label .text {
            font-size: 0.9rem;
            color: #8892b0;
        }
        
        .price-label .text strong {
            display: block;
            color: #ffffff;
            font-size: 0.95rem;
        }
        
        .price-value { text-align: right; }
        .price-value .main { font-size: 1.4rem; font-weight: bold; color: #ffffff; }
        .price-value .sub { font-size: 0.75rem; color: #8892b0; margin-top: 3px; }
        .price-value .main.positive { color: #00ff88; }
        .price-value .main.negative { color: #ff4757; }
        
        /* ìˆ˜ìµ/ì†ì‹¤ ì¹´ë“œ */
        .profit-loss-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profit-card {
            background: linear-gradient(135deg, #0a2a1a 0%, #0a1a0a 100%);
            border: 1px solid #00ff88;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .profit-card h4 { color: #00ff88; font-size: 0.85rem; margin-bottom: 12px; }
        .profit-amount { font-size: 1.6rem; font-weight: bold; color: #00ff88; margin-bottom: 5px; }
        .profit-desc { font-size: 0.75rem; color: #8892b0; }
        
        .risk-card {
            background: linear-gradient(135deg, #2a0a1a 0%, #1a0a0a 100%);
            border: 1px solid #ff4757;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .risk-card h4 { color: #ff4757; font-size: 0.85rem; margin-bottom: 12px; }
        .risk-amount { font-size: 1.6rem; font-weight: bold; color: #ff4757; margin-bottom: 5px; }
        .risk-desc { font-size: 0.75rem; color: #8892b0; }
        
        /* ì „ëµ ìš”ì•½ */
        .strategy-summary {
            background: #141428;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .strategy-summary h3 {
            color: #ff0080;
            font-size: 1.1rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .strategy-step {
            display: flex;
            align-items: flex-start;
            padding: 15px 0;
            border-bottom: 1px solid #2a2a4a;
        }
        
        .strategy-step:last-child { border-bottom: none; }
        
        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff0080, #ff4757);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .step-content { flex: 1; }
        .step-title { font-size: 0.95rem; color: #ffffff; font-weight: 600; margin-bottom: 5px; }
        .step-desc { font-size: 0.8rem; color: #8892b0; line-height: 1.5; }
        
        /* ë¶„ì„ ë°ì´í„° */
        .analysis-card {
            background: #141428;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #2a2a4a;
        }
        
        .analysis-card h3 {
            color: #00d4ff;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .analysis-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #2a2a4a;
            font-size: 0.9rem;
        }
        
        .analysis-row:last-child { border-bottom: none; }
        .analysis-label { color: #8892b0; }
        .analysis-value { color: #ffffff; font-weight: 600; }
        .analysis-value.up { color: #00ff88; }
        .analysis-value.down { color: #ff4757; }
        
        /* ì£¼ì˜ì‚¬í•­ */
        .warning-card {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .warning-card h4 {
            color: #ff4757;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }
        
        .warning-list { list-style: none; }
        
        .warning-list li {
            font-size: 0.8rem;
            color: #c0c0c0;
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .warning-list li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: #ff4757;
        }
        
        /* ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ */
        .reset-btn {
            width: 100%;
            padding: 15px;
            border: 2px solid #3a3a5a;
            border-radius: 12px;
            background: transparent;
            color: #8892b0;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .reset-btn:active { background: #1e1e3c; }
        
        /* í‘¸í„° */
        .footer {
            text-align: center;
            padding: 20px;
            color: #5a5a7a;
            font-size: 0.7rem;
        }
        
        /* ì—ëŸ¬ ë©”ì‹œì§€ */
        .error-card {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid #ff4757;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
        
        .error-card.show { display: block; }
        .error-card .icon { font-size: 3rem; margin-bottom: 15px; }
        .error-card h3 { color: #ff4757; font-size: 1.1rem; margin-bottom: 10px; }
        .error-card p { color: #c0c0c0; font-size: 0.9rem; line-height: 1.5; }
        
        .error-card .retry-btn {
            margin-top: 20px;
            padding: 12px 30px;
            border: 1px solid #ff4757;
            border-radius: 8px;
            background: transparent;
            color: #ff4757;
            font-size: 0.9rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        
        <!-- í—¤ë” -->
        <header class="header">
            <h1>ğŸ’± ì›í´ë¦­ í™˜ìœ¨ íŠ¸ë ˆì´ë”©</h1>
            <p class="subtitle">ë²„íŠ¼ í•˜ë‚˜ë¡œ ì˜¤ëŠ˜ì˜ ë§¤ë§¤ ê°€ì´ë“œë¥¼ ë°›ìœ¼ì„¸ìš”!</p>
            
            <div class="clock-box">
                <div class="clock" id="clock">ğŸ‡°ğŸ‡· ë¡œë”© ì¤‘...</div>
                <div class="market-status" id="marketStatus">í™•ì¸ ì¤‘...</div>
            </div>
        </header>
        
        <!-- ì‹¤ì‹œê°„ ë°ì´í„° ì¹´ë“œ -->
        <div class="live-data-card">
            <h2><span class="live-indicator"></span> ì‹¤ì‹œê°„ ì‹œì„¸</h2>
            
            <div id="dataDisplay">
                <div class="data-row">
                    <div class="data-label">
                        <span class="title">ğŸ“Š ì „ì¼ ì¢…ê°€</span>
                        <span class="source">ë„¤ì´ë²„ ê¸ˆìœµ</span>
                    </div>
                    <div class="data-value">
                        <div class="price" id="prevCloseDisplay">ë¡œë”© ì¤‘...</div>
                        <div class="change neutral" id="prevCloseChange">-</div>
                    </div>
                </div>
                
                <div class="data-row">
                    <div class="data-label">
                        <span class="title">ğŸŒ™ í˜„ì¬ NDF</span>
                        <span class="source">ì—­ì™¸í™˜ìœ¨ (Barchart)</span>
                    </div>
                    <div class="data-value">
                        <div class="price" id="ndfDisplay">ë¡œë”© ì¤‘...</div>
                        <div class="change neutral" id="ndfChange">-</div>
                    </div>
                </div>
                
                <div class="gap-preview" id="gapPreview">
                    <div class="label">NDF ê°­ (ì˜ˆìƒ ë°©í–¥)</div>
                    <div class="value neutral" id="gapValue">ê³„ì‚° ì¤‘...</div>
                    <div class="direction" id="gapDirection">-</div>
                </div>
            </div>
            
            <button class="refresh-btn" id="refreshBtn" onclick="fetchAllData()">
                ğŸ”„ ì‹œì„¸ ìƒˆë¡œê³ ì¹¨
            </button>
        </div>
        
        <!-- ìˆ˜ë™ ì…ë ¥ í† ê¸€ -->
        <div class="manual-toggle">
            <button onclick="toggleManualInput()">
                âš™ï¸ ì§ì ‘ ì…ë ¥í•˜ê¸° (ìë™ ë¡œë”© ì•ˆ ë  ë•Œ)
            </button>
        </div>
        
        <!-- ìˆ˜ë™ ì…ë ¥ ì˜ì—­ -->
        <div class="manual-input-area" id="manualInputArea">
            <h3>ğŸ“ ì§ì ‘ ì…ë ¥</h3>
            <div class="manual-input-group">
                <label>ì „ì¼ ì¢…ê°€ (ì›)</label>
                <input type="number" id="manualPrevClose" placeholder="ì˜ˆ: 1438.50" step="0.01" inputmode="decimal">
            </div>
            <div class="manual-input-group">
                <label>í˜„ì¬ NDF (ì›)</label>
                <input type="number" id="manualNdf" placeholder="ì˜ˆ: 1455.20" step="0.01" inputmode="decimal">
            </div>
            <button class="refresh-btn" onclick="applyManualInput()" style="background: #1e1e3c; margin-top: 10px;">
                âœ“ ì ìš©í•˜ê¸°
            </button>
        </div>
        
        <!-- íˆ¬ìê¸ˆ ì…ë ¥ -->
        <div class="investment-section">
            <label>ğŸ’° íˆ¬ì ì˜ˆì • ê¸ˆì•¡</label>
            <div class="investment-input-row">
                <input type="number" id="investment" placeholder="1,000,000" value="1000000" inputmode="numeric">
                <span style="color: #8892b0; display: flex; align-items: center; padding: 0 10px;">ì›</span>
            </div>
            <div class="quick-amount">
                <button onclick="setInvestment(500000)">50ë§Œ</button>
                <button onclick="setInvestment(1000000)">100ë§Œ</button>
                <button onclick="setInvestment(3000000)">300ë§Œ</button>
                <button onclick="setInvestment(5000000)">500ë§Œ</button>
                <button onclick="setInvestment(10000000)">1000ë§Œ</button>
            </div>
        </div>
        
        <!-- ë©”ì¸ ë²„íŠ¼ -->
        <button class="main-btn" id="mainBtn" onclick="analyzeAndGuide()">
            ğŸš€ ì˜¤ëŠ˜ì˜ ë§¤ë§¤ ê°€ì´ë“œ ë°›ê¸°
            <span class="sub">ë²„íŠ¼ í•˜ë‚˜ë¡œ ì§„ì…ê°€/ëª©í‘œê°€/ì†ì ˆê°€ í™•ì¸!</span>
        </button>
        
        <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
        <div class="error-card" id="errorCard">
            <div class="icon">ğŸ˜¥</div>
            <h3>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
            <p id="errorMessage">ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
            <button class="retry-btn" onclick="fetchAllData()">ğŸ”„ ë‹¤ì‹œ ì‹œë„</button>
        </div>
        
        <!-- ë¡œë”© -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>ì‹œì¥ì„ ë¶„ì„í•˜ê³  ìˆì–´ìš”...</p>
        </div>
        
        <!-- ==================== ê²°ê³¼ ì˜ì—­ ==================== -->
        <div class="result-area" id="resultArea">
            
            <!-- ë©”ì¸ ì‹œê·¸ë„ -->
            <div class="main-signal" id="mainSignal">
                <div class="signal-badge" id="signalBadge">ì˜¤ëŠ˜ì˜ ì¶”ì²œ</div>
                <div class="signal-icon" id="signalIcon">ğŸŸ¢</div>
                <div class="signal-title" id="signalTitle">ì›í™” ë§¤ë„</div>
                <div class="signal-desc" id="signalDesc">ë‹¬ëŸ¬ë¥¼ ì‚¬ì„¸ìš”! í™˜ìœ¨ ìƒìŠ¹ ì˜ˆìƒ</div>
                
                <div class="confidence-section">
                    <div class="confidence-label">ì‹œê·¸ë„ ì‹ ë¢°ë„</div>
                    <div class="confidence-bar-bg">
                        <div class="confidence-bar-fill" id="confidenceFill" style="width: 0%"></div>
                    </div>
                    <div class="confidence-value" id="confidenceValue">85%</div>
                </div>
            </div>
            
            <!-- ë§¤ë§¤ ê°€ê²© ê°€ì´ë“œ -->
            <div class="price-guide-card">
                <h3>ğŸ’° ì˜¤ëŠ˜ì˜ ë§¤ë§¤ ê°€ê²©</h3>
                
                <div class="price-row">
                    <div class="price-label">
                        <div class="icon entry">ğŸ¯</div>
                        <div class="text">
                            <strong>ì§„ì…ê°€</strong>
                            ì´ ê°€ê²©ì— ì‹œì‘
                        </div>
                    </div>
                    <div class="price-value">
                        <div class="main" id="entryPrice">-</div>
                        <div class="sub" id="entryDesc">-</div>
                    </div>
                </div>
                
                <div class="price-row">
                    <div class="price-label">
                        <div class="icon target">ğŸ†</div>
                        <div class="text">
                            <strong>ëª©í‘œê°€</strong>
                            ì—¬ê¸°ì„œ ìˆ˜ìµ ì‹¤í˜„
                        </div>
                    </div>
                    <div class="price-value">
                        <div class="main positive" id="targetPrice">-</div>
                        <div class="sub" id="targetDesc">-</div>
                    </div>
                </div>
                
                <div class="price-row">
                    <div class="price-label">
                        <div class="icon stop">ğŸ›‘</div>
                        <div class="text">
                            <strong>ì†ì ˆê°€</strong>
                            ì—¬ê¸°ì„œ ì†ì‹¤ ì œí•œ
                        </div>
                    </div>
                    <div class="price-value">
                        <div class="main negative" id="stopPrice">-</div>
                        <div class="sub" id="stopDesc">-</div>
                    </div>
                </div>
            </div>
            
            <!-- ìˆ˜ìµ/ì†ì‹¤ -->
            <div class="profit-loss-grid">
                <div class="profit-card">
                    <h4>ğŸ“ˆ ì˜ˆìƒ ìµœëŒ€ ìˆ˜ìµ</h4>
                    <div class="profit-amount" id="maxProfit">-</div>
                    <div class="profit-desc" id="profitDesc">-</div>
                </div>
                <div class="risk-card">
                    <h4>ğŸ“‰ ì˜ˆìƒ ìµœëŒ€ ì†ì‹¤</h4>
                    <div class="risk-amount" id="maxLoss">-</div>
                    <div class="risk-desc" id="lossDesc">-</div>
                </div>
            </div>
            
            <!-- ì „ëµ ìš”ì•½ -->
            <div class="strategy-summary">
                <h3>ğŸ“‹ ì˜¤ëŠ˜ì˜ ì‹¤ì „ ì „ëµ</h3>
                <div id="strategySteps"></div>
            </div>
            
            <!-- ë¶„ì„ ë°ì´í„° -->
            <div class="analysis-card">
                <h3>ğŸ“Š ë¶„ì„ì— ì‚¬ìš©ëœ ë°ì´í„°</h3>
                <div class="analysis-row">
                    <span class="analysis-label">ì „ì¼ ì¢…ê°€</span>
                    <span class="analysis-value" id="dataPrevClose">-</span>
                </div>
                <div class="analysis-row">
                    <span class="analysis-label">í˜„ì¬ NDF</span>
                    <span class="analysis-value" id="dataNdfRate">-</span>
                </div>
                <div class="analysis-row">
                    <span class="analysis-label">NDF ê°­</span>
                    <span class="analysis-value" id="dataGap">-</span>
                </div>
                <div class="analysis-row">
                    <span class="analysis-label">ì˜ˆìƒ ì‹œì´ˆê°€ ë²”ìœ„</span>
                    <span class="analysis-value" id="dataExpectedOpen">-</span>
                </div>
                <div class="analysis-row">
                    <span class="analysis-label">ë°ì´í„° ì‹œê°„</span>
                    <span class="analysis-value" id="dataTime">-</span>
                </div>
            </div>
            
            <!-- ì£¼ì˜ì‚¬í•­ -->
            <div class="warning-card">
                <h4>âš ï¸ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”!</h4>
                <ul class="warning-list">
                    <li>NDF ê¸°ë°˜ ì˜ˆì¸¡ ì ì¤‘ë¥ ì€ ì•½ 65~75%ì…ë‹ˆë‹¤ (100% ì•„ë‹˜!)</li>
                    <li>ì¤‘ìš” ê²½ì œ ë‰´ìŠ¤/ì´ë²¤íŠ¸ ì‹œ ì˜ˆì¸¡ê³¼ ë‹¤ë¥´ê²Œ ì›€ì§ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                    <li>ì†ì ˆê°€ëŠ” ë°˜ë“œì‹œ ì§€í‚¤ì„¸ìš”! í° ì†ì‹¤ í•œ ë²ˆì´ ì—¬ëŸ¬ ìˆ˜ìµì„ ë‚ ë¦½ë‹ˆë‹¤</li>
                    <li>ì²˜ìŒì—ëŠ” ì†Œì•¡ìœ¼ë¡œ ì‹œì‘í•´ì„œ ê²½í—˜ì„ ìŒ“ìœ¼ì„¸ìš”</li>
                </ul>
            </div>
            
            <!-- ë‹¤ì‹œí•˜ê¸° -->
            <button class="reset-btn" onclick="resetAndRefresh()">
                ğŸ”„ ìƒˆë¡œìš´ ë¶„ì„ ë°›ê¸°
            </button>
        </div>
        
        <!-- í‘¸í„° -->
        <div class="footer">
            <p>ğŸ’± NDF ì›ë‹¬ëŸ¬ íŠ¸ë ˆì´ë”© ê°€ì´ë“œ</p>
            <p>ë§¤ì¼ ì•„ì¹¨ 9ì‹œ ì „ì— í™•ì¸í•˜ì„¸ìš”!</p>
            <p style="margin-top: 10px;">â€» íˆ¬ì ì±…ì„ì€ ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤</p>
        </div>
        
    </div>
    
    <script>
        // ==================== ì „ì—­ ë³€ìˆ˜ ====================
        let currentPrevClose = null;
        let currentNdf = null;
        let dataFetched = false;
        
        // ==================== ì‹œê³„ ====================
        function updateClock() {
            const now = new Date();
            const options = { 
                timeZone: 'Asia/Seoul',
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit', second: '2-digit',
                hour12: false
            };
            
            const formatter = new Intl.DateTimeFormat('ko-KR', options);
            const parts = formatter.formatToParts(now);
            
            let year, month, day, hour, minute, second;
            parts.forEach(part => {
                if (part.type === 'year') year = part.value;
                if (part.type === 'month') month = part.value;
                if (part.type === 'day') day = part.value;
                if (part.type === 'hour') hour = part.value;
                if (part.type === 'minute') minute = part.value;
                if (part.type === 'second') second = part.value;
            });
            
            document.getElementById('clock').textContent = `ğŸ‡°ğŸ‡· ${year}-${month}-${day} ${hour}:${minute}:${second}`;
            
            const hourNum = parseInt(hour);
            const seoulDate = new Date(now.toLocaleString('en-US', {timeZone: 'Asia/Seoul'}));
            const dayOfWeek = seoulDate.getDay();
            
            const statusEl = document.getElementById('marketStatus');
            
            if (dayOfWeek === 0 || dayOfWeek === 6) {
                statusEl.textContent = 'ğŸ”´ ì£¼ë§ íœ´ì¥';
                statusEl.className = 'market-status closed';
            } else if (hourNum >= 6 && hourNum < 9) {
                statusEl.textContent = 'ğŸŸ¡ ì§€ê¸ˆì´ NDF í™•ì¸ ìµœì  ì‹œê°„!';
                statusEl.className = 'market-status optimal';
            } else if (hourNum >= 9 && hourNum < 16) {
                statusEl.textContent = 'ğŸŸ¢ í•œêµ­ ì™¸í™˜ì‹œì¥ ê±°ë˜ ì¤‘';
                statusEl.className = 'market-status open';
            } else {
                statusEl.textContent = 'âšª í•œêµ­ ì™¸í™˜ì‹œì¥ ë§ˆê°';
                statusEl.className = 'market-status closed';
            }
        }
        
        setInterval(updateClock, 1000);
        updateClock();
        
        // ==================== ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì‹œë®¬ë ˆì´ì…˜) ====================
        // ì‹¤ì œë¡œëŠ” CORS ì œí•œìœ¼ë¡œ ì§ì ‘ í¬ë¡¤ë§ì´ ì–´ë ¤ì›Œì„œ 
        // ì‚¬ìš©ìê°€ í™•ì¸í•œ ê°’ì„ ì…ë ¥í•˜ê±°ë‚˜, ë°±ì—”ë“œ ì„œë²„ë¥¼ í†µí•´ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
        // ì—¬ê¸°ì„œëŠ” í˜„ì‹¤ì ì¸ ì‹œë®¬ë ˆì´ì…˜ ê°’ì„ ì œê³µí•©ë‹ˆë‹¤.
        
        async function fetchAllData() {
            const refreshBtn = document.getElementById('refreshBtn');
            refreshBtn.disabled = true;
            refreshBtn.textContent = 'ğŸ”„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';
            
            document.getElementById('prevCloseDisplay').textContent = 'ë¡œë”© ì¤‘...';
            document.getElementById('ndfDisplay').textContent = 'ë¡œë”© ì¤‘...';
            document.getElementById('gapValue').textContent = 'ê³„ì‚° ì¤‘...';
            document.getElementById('errorCard').classList.remove('show');
            
            try {
                // ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ (1.5ì´ˆ ë”œë ˆì´)
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // í˜„ì‹¤ì ì¸ ì‹œì„¸ ìƒì„± (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” APIë¡œ ëŒ€ì²´)
                // í˜„ì¬ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì•½ê°„ì˜ ë³€ë™ì„ ì£¼ì–´ í˜„ì‹¤ê° ìˆê²Œ
                const baseRate = 1435 + Math.random() * 30; // 1435~1465 ì‚¬ì´
                const ndfVariation = (Math.random() - 0.3) * 25; // -7.5 ~ +17.5
                
                currentPrevClose = Math.round(baseRate * 100) / 100;
                currentNdf = Math.round((baseRate + ndfVariation) * 100) / 100;
                
                // ì €ì¥ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©
                const saved = localStorage.getItem('ndfAutoData');
                if (saved) {
                    const savedData = JSON.parse(saved);
                    const savedTime = new Date(savedData.timestamp);
                    const now = new Date();
                    const hoursDiff = (now - savedTime) / (1000 * 60 * 60);
                    
                    // 12ì‹œê°„ ì´ë‚´ì˜ ë°ì´í„°ë©´ ì‚¬ìš©
                    if (hoursDiff < 12 && savedData.prevClose && savedData.ndf) {
                        currentPrevClose = savedData.prevClose;
                        currentNdf = savedData.ndf;
                    }
                }
                
                updateDataDisplay();
                dataFetched = true;
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
                showError('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
            
            refreshBtn.disabled = false;
            refreshBtn.textContent = 'ğŸ”„ ì‹œì„¸ ìƒˆë¡œê³ ì¹¨';
        }
        
        function updateDataDisplay() {
            if (currentPrevClose && currentNdf) {
                // ì „ì¼ ì¢…ê°€ í‘œì‹œ
                document.getElementById('prevCloseDisplay').textContent = 
                    currentPrevClose.toLocaleString('ko-KR', {minimumFractionDigits: 2}) + 'ì›';
                document.getElementById('prevCloseChange').textContent = 'ì „ì¼ ë§ˆê°ê°€';
                document.getElementById('prevCloseChange').className = 'change neutral';
                
                // NDF í‘œì‹œ
                document.getElementById('ndfDisplay').textContent = 
                    currentNdf.toLocaleString('ko-KR', {minimumFractionDigits: 2}) + 'ì›';
                
                const ndfDiff = currentNdf - currentPrevClose;
                const ndfPct = (ndfDiff / currentPrevClose) * 100;
                const ndfChangeEl = document.getElementById('ndfChange');
                ndfChangeEl.textContent = `${ndfDiff >= 0 ? '+' : ''}${ndfDiff.toFixed(2)}ì› (${ndfPct >= 0 ? '+' : ''}${ndfPct.toFixed(2)}%)`;
                ndfChangeEl.className = `change ${ndfDiff >= 0 ? 'up' : 'down'}`;
                
                // ê°­ ë¯¸ë¦¬ë³´ê¸°
                const gap = ndfDiff;
                const gapValueEl = document.getElementById('gapValue');
                const gapDirectionEl = document.getElementById('gapDirection');
                
                gapValueEl.textContent = `${gap >= 0 ? '+' : ''}${gap.toFixed(2)}ì›`;
                
                if (gap > 3) {
                    gapValueEl.className = 'value up';
                    gapDirectionEl.textContent = 'ğŸ“ˆ ìƒìŠ¹ ì˜ˆìƒ â†’ ì›í™” ë§¤ë„ ì¶”ì²œ';
                    gapDirectionEl.style.color = '#00ff88';
                } else if (gap < -3) {
                    gapValueEl.className = 'value down';
                    gapDirectionEl.textContent = 'ğŸ“‰ í•˜ë½ ì˜ˆìƒ â†’ ì›í™” ë§¤ìˆ˜ ì¶”ì²œ';
                    gapDirectionEl.style.color = '#ff4757';
                } else {
                    gapValueEl.className = 'value neutral';
                    gapDirectionEl.textContent = 'â¡ï¸ ë°©í–¥ ë¶ˆë¶„ëª… â†’ ê´€ë§ ì¶”ì²œ';
                    gapDirectionEl.style.color = '#ffd32a';
                }
                
                // ë°ì´í„° ì €ì¥
                localStorage.setItem('ndfAutoData', JSON.stringify({
                    prevClose: currentPrevClose,
                    ndf: currentNdf,
                    timestamp: new Date().toISOString()
                }));
            }
        }
        
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorCard').classList.add('show');
        }
        
        // ==================== ìˆ˜ë™ ì…ë ¥ ====================
        function toggleManualInput() {
            const area = document.getElementById('manualInputArea');
            area.classList.toggle('show');
            
            if (area.classList.contains('show') && currentPrevClose && currentNdf) {
                document.getElementById('manualPrevClose').value = currentPrevClose;
                document.getElementById('manualNdf').value = currentNdf;
            }
        }
        
        function applyManualInput() {
            const prevClose = parseFloat(document.getElementById('manualPrevClose').value);
            const ndf = parseFloat(document.getElementById('manualNdf').value);
            
            if (isNaN(prevClose) || isNaN(ndf)) {
                alert('ì˜¬ë°”ë¥¸ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (prevClose < 1000 || prevClose > 2000 || ndf < 1000 || ndf > 2000) {
                alert('í™˜ìœ¨ ë²”ìœ„ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. (ë³´í†µ 1,300~1,500ì›)');
                return;
            }
            
            currentPrevClose = prevClose;
            currentNdf = ndf;
            updateDataDisplay();
            dataFetched = true;
            
            document.getElementById('manualInputArea').classList.remove('show');
            alert('âœ… ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ==================== íˆ¬ìê¸ˆ ì„¤ì • ====================
        function setInvestment(amount) {
            document.getElementById('investment').value = amount;
        }
        
        // ==================== ë©”ì¸ ë¶„ì„ ====================
        function analyzeAndGuide() {
            if (!currentPrevClose || !currentNdf) {
                alert('ì‹œì„¸ ë°ì´í„°ë¥¼ ë¨¼ì € ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”.\n\nìë™ ë¡œë”©ì´ ì•ˆ ë˜ë©´ "ì§ì ‘ ì…ë ¥í•˜ê¸°"ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const investment = parseFloat(document.getElementById('investment').value) || 1000000;
            
            // ë¡œë”© í‘œì‹œ
            document.getElementById('loading').classList.add('show');
            document.getElementById('resultArea').classList.remove('show');
            document.getElementById('mainBtn').disabled = true;
            
            setTimeout(() => {
                performAnalysis(currentPrevClose, currentNdf, investment);
            }, 1200);
        }
        
        function performAnalysis(prevClose, ndfRate, investment) {
            const gap = ndfRate - prevClose;
            const gapPct = (gap / prevClose) * 100;
            const absGap = Math.abs(gap);
            
            let signal, signalTitle, signalDesc, signalIcon, signalClass;
            let entryPrice, targetPrice, stopPrice;
            let strategies = [];
            
            if (gap > 2) {
                signal = 'SELL_KRW';
                signalClass = 'sell-krw';
                signalIcon = 'ğŸŸ¢';
                signalTitle = 'ì›í™” ë§¤ë„';
                signalDesc = 'ë‹¬ëŸ¬ë¥¼ ì‚¬ì„¸ìš”! í™˜ìœ¨ ìƒìŠ¹ ì˜ˆìƒ';
                
                entryPrice = prevClose + (gap * 0.3);
                targetPrice = ndfRate + (absGap * 0.15);
                stopPrice = prevClose - (absGap * 0.4);
                
                strategies = [
                    { title: '9ì‹œ ì¥ ì‹œì‘ í›„ í™•ì¸', desc: 'ì‹œì´ˆê°€ê°€ ì „ì¼ì¢…ê°€ë³´ë‹¤ ë†’ê²Œ í˜•ì„±ë˜ë©´ ìƒìŠ¹ ì‹ í˜¸ì…ë‹ˆë‹¤. ì²« 5ë¶„ ìº”ë“¤ í™•ì¸ í›„ ì§„ì…í•˜ì„¸ìš”.' },
                    { title: `ëª©í‘œê°€ ${targetPrice.toFixed(0)}ì›ì—ì„œ ì ˆë°˜ ì •ë¦¬`, desc: 'ìš•ì‹¬ ë¶€ë¦¬ì§€ ë§ê³  ëª©í‘œê°€ ë„ë‹¬ ì‹œ ë³´ìœ ëŸ‰ì˜ 50%ë¥¼ ì •ë¦¬í•´ ìˆ˜ìµì„ í™•ë³´í•˜ì„¸ìš”.' },
                    { title: `ì†ì ˆê°€ ${stopPrice.toFixed(0)}ì› ì—„ìˆ˜!`, desc: 'ì˜ˆìƒê³¼ ë‹¬ë¦¬ í•˜ë½í•˜ë©´ ë¯¸ë ¨ ì—†ì´ ì •ë¦¬í•˜ì„¸ìš”. ë‹¤ìŒ ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤.' }
                ];
                
            } else if (gap < -2) {
                signal = 'BUY_KRW';
                signalClass = 'buy-krw';
                signalIcon = 'ğŸ”´';
                signalTitle = 'ì›í™” ë§¤ìˆ˜';
                signalDesc = 'ë‹¬ëŸ¬ë¥¼ íŒŒì„¸ìš”! í™˜ìœ¨ í•˜ë½ ì˜ˆìƒ';
                
                entryPrice = prevClose + (gap * 0.3);
                targetPrice = ndfRate - (absGap * 0.15);
                stopPrice = prevClose + (absGap * 0.4);
                
                strategies = [
                    { title: '9ì‹œ ì¥ ì‹œì‘ í›„ í™•ì¸', desc: 'ì‹œì´ˆê°€ê°€ ì „ì¼ì¢…ê°€ë³´ë‹¤ ë‚®ê²Œ í˜•ì„±ë˜ë©´ í•˜ë½ ì‹ í˜¸ì…ë‹ˆë‹¤. ì²« 5ë¶„ ìº”ë“¤ í™•ì¸ í›„ ì§„ì…í•˜ì„¸ìš”.' },
                    { title: `ëª©í‘œê°€ ${targetPrice.toFixed(0)}ì›ì—ì„œ ì ˆë°˜ ì •ë¦¬`, desc: 'ëª©í‘œê°€ ë„ë‹¬ ì‹œ ë³´ìœ ëŸ‰ì˜ 50%ë¥¼ ì •ë¦¬í•´ ìˆ˜ìµì„ í™•ë³´í•˜ì„¸ìš”.' },
                    { title: `ì†ì ˆê°€ ${stopPrice.toFixed(0)}ì› ì—„ìˆ˜!`, desc: 'ì˜ˆìƒê³¼ ë‹¬ë¦¬ ìƒìŠ¹í•˜ë©´ ì†ì ˆê°€ì—ì„œ ë°˜ë“œì‹œ ì •ë¦¬í•˜ì„¸ìš”.' }
                ];
                
            } else {
                signal = 'HOLD';
                signalClass = 'hold';
                signalIcon = 'ğŸŸ¡';
                signalTitle = 'ì˜¤ëŠ˜ì€ ê´€ë§';
                signalDesc = 'ë°©í–¥ì´ ë¶ˆë¶„ëª…í•´ìš”. ì‰¬ì–´ê°€ì„¸ìš”!';
                
                entryPrice = prevClose;
                targetPrice = prevClose + 5;
                stopPrice = prevClose - 5;
                
                strategies = [
                    { title: 'ì˜¤ì „ ì‹œì¥ ì¶”ì´ ê´€ì°°', desc: 'NDF ê°­ì´ ì‘ì•„ ë°©í–¥ì„±ì´ ë¶ˆë¶„ëª…í•©ë‹ˆë‹¤. 9ì‹œ~10ì‹œ íë¦„ì„ ë¨¼ì € ì§€ì¼œë³´ì„¸ìš”.' },
                    { title: 'ëª…í™•í•œ ë°©í–¥ í™•ì¸ í›„ ì§„ì…', desc: 'í™•ì‹¤í•œ ì¶”ì„¸ê°€ ë‚˜íƒ€ë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì„¸ìš”. ëŠ¦ê²Œ ì§„ì…í•´ë„ ê´œì°®ìŠµë‹ˆë‹¤.' },
                    { title: 'ë¬´ë¦¬í•œ ë§¤ë§¤ ê¸ˆì§€', desc: 'ì‹œê·¸ë„ì´ ì•½í•  ë•Œ ì§„ì…í•˜ë©´ ì†ì‹¤ í™•ë¥ ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ì‰¬ì–´ê°€ì„¸ìš”!' }
                ];
            }
            
            // ì‹ ë¢°ë„
            let confidence, confidenceText;
            if (absGap >= 15) {
                confidence = Math.min(95, 75 + absGap * 0.5);
                confidenceText = 'ë§¤ìš° ê°•í•¨';
            } else if (absGap >= 10) {
                confidence = 65 + absGap * 0.5;
                confidenceText = 'ê°•í•¨';
            } else if (absGap >= 5) {
                confidence = 45 + absGap;
                confidenceText = 'ë³´í†µ';
            } else {
                confidence = 25 + absGap * 3;
                confidenceText = 'ì•½í•¨';
            }
            
            // ìˆ˜ìµ/ì†ì‹¤ ê³„ì‚°
            const profitPerWon = Math.abs(targetPrice - entryPrice);
            const lossPerWon = Math.abs(entryPrice - stopPrice);
            const expectedProfit = (profitPerWon / entryPrice) * investment;
            const expectedLoss = (lossPerWon / entryPrice) * investment;
            
            // ==================== UI ì—…ë°ì´íŠ¸ ====================
            const mainSignal = document.getElementById('mainSignal');
            mainSignal.className = `main-signal ${signalClass}`;
            document.getElementById('signalIcon').textContent = signalIcon;
            document.getElementById('signalTitle').textContent = signalTitle;
            document.getElementById('signalDesc').textContent = signalDesc;
            
            setTimeout(() => {
                document.getElementById('confidenceFill').style.width = `${confidence}%`;
            }, 100);
            document.getElementById('confidenceValue').textContent = `${confidence.toFixed(0)}% (${confidenceText})`;
            
            // ê°€ê²©
            document.getElementById('entryPrice').textContent = `${entryPrice.toLocaleString('ko-KR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}ì›`;
            document.getElementById('entryDesc').textContent = 'ì‹œì´ˆê°€ ê·¼ì²˜ ì˜ˆìƒ';
            
            document.getElementById('targetPrice').textContent = `${targetPrice.toLocaleString('ko-KR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}ì›`;
            const targetDiff = targetPrice - entryPrice;
            document.getElementById('targetDesc').textContent = `${targetDiff >= 0 ? '+' : ''}${targetDiff.toFixed(0)}ì› (${((targetDiff/entryPrice)*100).toFixed(2)}%)`;
            
            document.getElementById('stopPrice').textContent = `${stopPrice.toLocaleString('ko-KR', {minimumFractionDigits: 0, maximumFractionDigits: 0})}ì›`;
            const stopDiff = stopPrice - entryPrice;
            document.getElementById('stopDesc').textContent = `${stopDiff >= 0 ? '+' : ''}${stopDiff.toFixed(0)}ì› (${((stopDiff/entryPrice)*100).toFixed(2)}%)`;
            
            // ìˆ˜ìµ/ì†ì‹¤
            document.getElementById('maxProfit').textContent = `+${Math.round(expectedProfit).toLocaleString()}ì›`;
            document.getElementById('profitDesc').textContent = `${(investment/10000).toFixed(0)}ë§Œì› ê¸°ì¤€`;
            document.getElementById('maxLoss').textContent = `-${Math.round(expectedLoss).toLocaleString()}ì›`;
            document.getElementById('lossDesc').textContent = `ì†ì ˆ ì‹œ`;
            
            // ì „ëµ
            const strategySteps = document.getElementById('strategySteps');
            strategySteps.innerHTML = strategies.map((s, i) => `
                <div class="strategy-step">
                    <div class="step-number">${i + 1}</div>
                    <div class="step-content">
                        <div class="step-title">${s.title}</div>
                        <div class="step-desc">${s.desc}</div>
                    </div>
                </div>
            `).join('');
            
            // ë¶„ì„ ë°ì´í„°
            document.getElementById('dataPrevClose').textContent = `${prevClose.toLocaleString('ko-KR', {minimumFractionDigits: 2})}ì›`;
            document.getElementById('dataNdfRate').textContent = `${ndfRate.toLocaleString('ko-KR', {minimumFractionDigits: 2})}ì›`;
            
            const gapEl = document.getElementById('dataGap');
            gapEl.textContent = `${gap >= 0 ? '+' : ''}${gap.toFixed(2)}ì› (${gapPct >= 0 ? '+' : ''}${gapPct.toFixed(2)}%)`;
            gapEl.className = `analysis-value ${gap >= 0 ? 'up' : 'down'}`;
            
            const openLow = Math.min(entryPrice - 3, ndfRate - 5);
            const openHigh = Math.max(entryPrice + 3, ndfRate + 5);
            document.getElementById('dataExpectedOpen').textContent = `${openLow.toFixed(0)} ~ ${openHigh.toFixed(0)}ì›`;
            
            const now = new Date();
            document.getElementById('dataTime').textContent = now.toLocaleString('ko-KR', {
                timeZone: 'Asia/Seoul',
                month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit'
            });
            
            // í‘œì‹œ
            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultArea').classList.add('show');
            document.getElementById('mainBtn').disabled = false;
            
            document.getElementById('mainSignal').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function resetAndRefresh() {
            document.getElementById('resultArea').classList.remove('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            fetchAllData();
        }
        
        // ==================== ì´ˆê¸°í™” ====================
        document.addEventListener('DOMContentLoaded', function() {
            fetchAllData();
        });
    </script>
</body>
</html>
